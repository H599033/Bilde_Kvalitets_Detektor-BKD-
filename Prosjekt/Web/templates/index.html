<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="{{ url_for('serve_css', filename='index.css') }}">
</head>
<body style="background-color: rgb(40, 39, 39);">
    <header style="text-align: left;">
        <img src="/logo/logo2.png" alt="Logo">
    </header>
    <div id="content" style="background-color: LightGray;">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script>
        $(document).ready(function(){
            $.getJSON("/display", function(data){
                var table = $("<table></table>");
                var headerRow = $("<tr></tr>");
                headerRow.append("<th>ID</th>");
                headerRow.append("<th>Sted</th>");
                headerRow.append("<th>Tid</th>");
                headerRow.append("<th>Dato</th>");
                headerRow.append("<th>Kvalitet</th>");
                headerRow.append("<th>Orginal Bilder</th>");
                headerRow.append("<th>Redigerte Bilder</th>");
                table.append(headerRow);
                $.each(data, function(key, value){
                    var row = $("<tr></tr>");
                    row.append("<td><p>" + value.ID + "</p></td>");
                    row.append("<td><p>" + value.sted + "</p></td>");
                    row.append("<td><p>" + value.tid + "</p></td>");
                    row.append("<td><p>" + value.dato + "</p></td>");
                    row.append("<td><p>" + value.motion_blur + value.lav_belysning + value.urent_kamera + "</p></td>");
                    var imgCell = $("<td></td>");
                    var select = $("<select class='image-selector'></select>");
                    $.each(value.orginal_bilder, function(i, img){
                        select.append("<option value='" + img + "'>Image " + (i+1) + "</option>");
                    });
                    imgCell.append(select);
                    imgCell.append("<img class='selected-image' src='" + value.orginal_bilder[0] + "' alt='Orginal Bilder'>");
                    row.append(imgCell);
                    var redImgCell = $("<td></td>");
                    var redSelect = $("<select class='image-selector'></select>");
                    $.each(value.redigerte_bilder, function(i, img){
                        redSelect.append("<option value='" + img + "'>Image " + (i+1) + "</option>");
                    });
                    redImgCell.append(redSelect);
                    redImgCell.append("<img class='selected-image' src='" + value.redigerte_bilder[0] + "' alt='Redigerte Bilder'>");
                    row.append(redImgCell);
                    table.append(row);
                });
                $("#content").append(table);
            });
        });

        $(document).on('change', '.image-selector', function() {
            var selectedImage = $(this).val();
            $(this).siblings('.selected-image').attr('src', selectedImage);
        });
        </script>
    </div>
</body>
</html>
